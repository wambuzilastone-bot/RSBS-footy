<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>RSBS Football Fixtures</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body {
      font-family: monospace;
      background-color: #f5f5f5;
      color: #333;
      padding: 20px;
    }
    select {
      font-family: monospace;
      margin: 0 10px 20px 0;
      padding: 5px;
    }
    h1 {
      font-family: monospace;
    }
    #fixtures {
      margin-top: 20px;
    }
    .fixture {
      padding: 5px;
      border-bottom: 1px solid #ccc;
    }
  </style>
</head>
<body>
  <h1>RSBS Football Fixtures</h1>
  <label for="countrySelect">Select Country:</label>
  <select id="countrySelect">
    <option value="">--Choose Country--</option>
    <option value="afghanistan">Afghanistan</option>
    <option value="albania">Albania</option>
    <option value="algeria">Algeria</option>
    <option value="andorra">Andorra</option>
    <option value="angola">Angola</option>
    <option value="antigua-and-barbuda">Antigua & Barbuda</option>
    <option value="argentina">Argentina</option>
    <option value="armenia">Armenia</option>
    <option value="australia">Australia</option>
    <option value="austria">Austria</option>
    <option value="azerbaijan">Azerbaijan</option>
    <option value="bahamas">Bahamas</option>
    <option value="bahrain">Bahrain</option>
    <option value="bangladesh">Bangladesh</option>
    <option value="barbados">Barbados</option>
    <option value="belarus">Belarus</option>
    <option value="belgium">Belgium</option>
    <option value="belize">Belize</option>
    <option value="benin">Benin</option>
    <option value="bhutan">Bhutan</option>
    <option value="bolivia">Bolivia</option>
    <option value="bosnia-herzegovina">Bosnia & Herzegovina</option>
    <option value="botswana">Botswana</option>
    <option value="brazil">Brazil</option>
    <option value="brunei">Brunei</option>
    <option value="bulgaria">Bulgaria</option>
    <option value="burkina-faso">Burkina Faso</option>
    <option value="burundi">Burundi</option>
    <option value="cambodia">Cambodia</option>
    <option value="cameroon">Cameroon</option>
    <option value="canada">Canada</option>
    <option value="cape-verde">Cape Verde</option>
    <option value="central-african-republic">Central African Republic</option>
    <option value="chad">Chad</option>
    <option value="chile">Chile</option>
    <option value="china">China</option>
    <option value="colombia">Colombia</option>
    <option value="comoros">Comoros</option>
    <option value="costa-rica">Costa Rica</option>
    <option value="croatia">Croatia</option>
    <option value="cuba">Cuba</option>
    <option value="cyprus">Cyprus</option>
    <option value="czech-republic">Czech Republic</option>
    <option value="denmark">Denmark</option>
    <option value="djibouti">Djibouti</option>
    <option value="dominica">Dominica</option>
    <option value="dominican-republic">Dominican Republic</option>
    <option value="ecuador">Ecuador</option>
    <option value="egypt">Egypt</option>
    <option value="el-salvador">El Salvador</option>
    <option value="england">England</option>
    <option value="equatorial-guinea">Equatorial Guinea</option>
    <option value="eritrea">Eritrea</option>
    <option value="estonia">Estonia</option>
    <option value="eswatini">Eswatini</option>
    <option value="ethiopia">Ethiopia</option>
    <option value="fiji">Fiji</option>
    <option value="finland">Finland</option>
    <option value="france">France</option>
    <option value="gabon">Gabon</option>
    <option value="gambia">Gambia</option>
    <option value="georgia">Georgia</option>
    <option value="germany">Germany</option>
    <option value="ghana">Ghana</option>
    <option value="greece">Greece</option>
    <option value="grenada">Grenada</option>
    <option value="guatemala">Guatemala</option>
    <option value="guinea">Guinea</option>
    <option value="guinea-bissau">Guinea-Bissau</option>
    <option value="guyana">Guyana</option>
    <option value="haiti">Haiti</option>
    <option value="honduras">Honduras</option>
    <option value="hungary">Hungary</option>
    <option value="iceland">Iceland</option>
    <option value="india">India</option>
    <option value="indonesia">Indonesia</option>
    <option value="iran">Iran</option>
    <option value="iraq">Iraq</option>
    <option value="ireland">Ireland</option>
    <option value="israel">Israel</option>
    <option value="italy">Italy</option>
    <option value="jamaica">Jamaica</option>
    <option value="japan">Japan</option>
    <option value="jordan">Jordan</option>
    <option value="kazakhstan">Kazakhstan</option>
    <option value="kenya">Kenya</option>
    <option value="korea-south">Korea South</option>
    <option value="kuwait">Kuwait</option>
    <option value="uganda">Uganda</option>
    <option value="usa">USA</option>
    <option value="zimbabwe">Zimbabwe</option>
  </select>

  <label for="leagueSelect">Select League:</label>
  <select id="leagueSelect">
    <option value="">--Choose League--</option>
    <option value="premier-league">PREMIER LEAGUE</option>
    <option value="championship">CHAMPIONSHIP</option>
    <option value="league-one">LEAGUE ONE</option>
    <option value="league-two">LEAGUE TWO</option>
  </select>

  <div id="fixtures"></div>

  <script src="script.js"></script>
  <script>
    const countrySelect = document.getElementById("countrySelect");
    const leagueSelect = document.getElementById("leagueSelect");
    const fixturesDiv = document.getElementById("fixtures");

    async function loadFixtures() {
      const country = countrySelect.value;
      const league = leagueSelect.value;

      if (!country || !league) {
        fixturesDiv.innerHTML = "";
        return;
      }

      fixturesDiv.innerHTML = "Loading fixtures...";

      try {
        const res = await fetch(`/api/fixtures?country=${country}&league=${league}`);
        if (!res.ok) throw new Error(res.statusText);
        const data = await res.json();

        if (data.fixtures && data.fixtures.length > 0) {
          fixturesDiv.innerHTML = "";
          data.fixtures.forEach(f => {
            const div = document.createElement("div");
            div.className = "fixture";
            div.textContent = `${f.match} | Goals: ${f.goal_ratio} | WDL: ${f.wdl_ratio} | H/A: ${f.ha_record}`;
            fixturesDiv.appendChild(div);
          });
        } else {
          fixturesDiv.innerHTML = "No upcoming fixtures found.";
        }
      } catch (err) {
        fixturesDiv.innerHTML = `Error loading fixtures: ${err}`;
        console.error(err);
      }
    }

    countrySelect.addEventListener("change", loadFixtures);
    leagueSelect.addEventListener("change", loadFixtures);
  </script>
</body>
</html>
